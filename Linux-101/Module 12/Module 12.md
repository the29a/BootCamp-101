# 12. Управление пакетами

Независимо от того, работаете ли вы системным администратором, обслуживаете наши собственные машины Linux дома или создаете/обновляете/обслуживаете выбранный нами дистрибутив, крайне важно иметь твердое представление о доступных менеджерах пакетов Linux и различных способах их использования для устанавливать, обновлять или удалять пакеты. Пакеты - это архивы, которые содержат двоичные файлы программного обеспечения, файлы конфигурации, информацию о зависимостях и отслеживают обновления и обновления. Большинство систем управления пакетами предоставляют следующие возможности:

- Скачивание пакета
- Разрешение зависимости
- Стандартный двоичный формат пакета
- Общие места установки и настройки
- Дополнительная системная конфигурация и функциональность
- Контроль качества

Мы можем использовать множество различных систем управления пакетами, которые охватывают разные типы файлов, такие как «.deb», «.rpm» и другие. Требование к управлению пакетами состоит в том, чтобы устанавливаемое программное обеспечение было доступно в виде соответствующего пакета. Обычно это создается, предлагается и поддерживается централизованно в дистрибутивах Linux. Таким образом, программное обеспечение интегрировано непосредственно в систему, а его различные каталоги распределены по всей системе. Изменения программного обеспечения управления пакетами в системе для установки пакета берутся из пакета и реализуются программным обеспечением управления пакетами. 

Если программное обеспечение управления пакетами обнаруживает, что для правильного функционирования пакета, который еще не был установлен, требуются дополнительные пакеты, включается зависимость и либо предупреждает администратора, либо пытается перезагрузить недостающее программное обеспечение, например, из репозитория и установить это заранее.

Если установленное программное обеспечение было удалено, система управления пакетами повторно принимает информацию о пакете, изменяет ее в зависимости от конфигурации и удаляет файлы.

Для этого мы можем использовать различные программы управления пакетами. Вот список примеров таких программ:
| Команда | описание |
| ------ | ------ |
| dpkg | это инструмент для установки, сборки, удаления пакетов Debian и управления ими. Основной и более удобный интерфейс для dpkg - это aptitude |
| apt | apt  предоставляет высокоуровневый интерфейс командной строки для системы управления пакетами |
| aptitude | aptitude является альтернативой apt и представляет собой высокоуровневый интерфейс для диспетчера пакетов |
| snap | Установка, настройка, обновление и удаление пакетов snap. Snaps обеспечивают безопасное распространение новейших приложений и утилит для облака, серверов, настольных компьютеров и Интернета вещей |
| gem | Gem - это интерфейс для RubyGems, стандартного менеджера пакетов для Ruby |
| pip | Pip - это установщик пакетов Python, рекомендуемый для установки пакетов Python, которых нет в архиве Debian. Он может работать с репозиториями управления версиями (в настоящее время только репозиториями Git, Mercurial и Bazaar), широко ведет журнал вывода и предотвращает частичную установку, загружая все требования перед началом установки |
| git | Git - это быстрая, масштабируемая, распределенная система контроля версий с необычно богатым набором команд, обеспечивающая как высокоуровневые операции, так и полный доступ к внутренним компонентам |

Настоятельно рекомендуется настроить нашу виртуальную машину (ВМ) локально, чтобы поэкспериментировать с ней.

Давайте немного поэкспериментируем с нашей локальной виртуальной машиной и расширим ее с помощью нескольких дополнительных пакетов. Во-первых, давайте установим git с помощью apt.
Расширенный диспетчер пакетов (APT)

В дистрибутивах Linux на основе Debian используется диспетчер пакетов APT. Пакет - это архивный файл, содержащий несколько файлов с расширением ".deb". Утилита dpkg используется для установки программ из связанного файла ".deb". APT упрощает обновление и установку программ, поскольку многие программы имеют зависимости. При установке программы из автономного файла «.deb» мы можем столкнуться с проблемами зависимостей, и нам потребуется загрузить и установить один или несколько дополнительных пакетов. APT, упаковывая вместе все зависимости, необходимые для установки программы.

Каждый дистрибутив Linux использует репозитории программного обеспечения, которые часто обновляются. Когда мы обновляем программу или устанавливаем новую, система запрашивает в этих репозиториях желаемый пакет. Репозитории можно пометить как стабильные, тестируемые или нестабильные. В большинстве дистрибутивов Linux используется самый стабильный или «основной» репозиторий.

APT использует базу данных, называемую кешем APT. Это используется для предоставления информации о пакетах, установленных в нашей системе в автономном режиме. Мы можем выполнить поиск в кэше APT, например, чтобы найти все пакеты, связанные с Impacket.
```
the29a@host[/~]$ apt-cache search impacket

impacket-scripts - Links to useful impacket scripts examples
polenum - Extracts the password policy from a Windows system
python-pcapy - Python interface to the libpcap packet capture library (Python 2)
python3-impacket - Python3 module to easily build and dissect network protocols
python3-pcapy - Python interface to the libpcap packet capture library (Python 3)
```
Затем мы можем просмотреть дополнительную информацию о пакете.

```
the29a@host[/~]$ apt-cache show impacket-scripts

Package: impacket-scripts
Version: 1.4
Architecture: all
Maintainer: Kali Developers <devel@kali.org>
Installed-Size: 13
Depends: python3-impacket (>= 0.9.20), python3-ldap3 (>= 2.5.0), python3-ldapdomaindump
Breaks: python-impacket (<< 0.9.18)
Replaces: python-impacket (<< 0.9.18)
Priority: optional
Section: misc
Filename: pool/main/i/impacket-scripts/impacket-scripts_1.4_all.deb
Size: 2080
```
```
the29a@host[/~]$ apt list --installed

Listing... Done
accountsservice/rolling,now 0.6.55-2 amd64 [installed,automatic]
adapta-gtk-theme/rolling,now 3.95.0.11-1 all [installed]
adduser/rolling,now 3.118 all [installed]
adwaita-icon-theme/rolling,now 3.36.1-2 all [installed,automatic]
aircrack-ng/rolling,now 1:1.6-4 amd64 [installed,automatic]
```
Если нам не хватает некоторых пакетов, мы можем найти его и установить с помощью следующей команды.
```
he29a@hostname[/]$ sudo apt install impacket-scripts -y

Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following NEW packages will be installed:
  impacket-scripts
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 2,080 B of archives.
After this operation, 13.3 kB of additional disk space will be used.
Get:1 https://euro2-emea-mirror.parrot.sh/mirrors/parrot rolling/main amd64 impacket-scripts all 1.4 [2,080 B]
Fetched 2,080 B in 0s (15.2 kB/s)
Selecting previously unselected package impacket-scripts.
(Reading database ... 378459 files and directories currently installed.)
Preparing to unpack .../impacket-scripts_1.4_all.deb ...
Unpacking impacket-scripts (1.4) ...
Setting up impacket-scripts (1.4) ...
Scanning application launchers
Removing duplicate launchers from Debian
Launchers are updated
```